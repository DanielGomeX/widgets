<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>World News</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&amp;subset=cyrillic" rel="stylesheet">
    <style>html,
body {
  margin: 0;
  padding: 0;
  width: 1440px;
  height: 270px;
  font-family: 'Roboto', sans-serif;
  background: #222;
}
div {
  box-sizing: border-box;
}
.placeholder {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  color: #000;
  padding: 5px;
}
.placeholder__inner {
  border: 2px solid #fff;
  height: calc(100% - 10px);
}
.content {
  font-size: 0;
  height: 100%;
  color: #fff;
}
.content__block {
  font-size: 14px;
  display: block;
  padding: 10px;
  visibility: hidden;
}
.content__block.big {
  height: 100%;
}
.content__block.big .content__block__title {
  font-size: 175px;
  white-space: nowrap;
}
.content__block.active {
  visibility: visible;
}
.content__block__title {
  font-size: 40px;
  margin-bottom: 25px;
  font-weight: 900;
}
.content__block__description {
  font-size: 30px;
  line-height: 34px;
  font-weight: 500;
}
</style>
</head>
<body>
    <div class="placeholder">
        <div class="placeholder__inner">
            <div class="content js-content">

            </div>
        </div>
    </div>
<script>$(document).ready(function() {

    var $content = $('.js-content'),
        animationSpeed = 250,
        index = 0;

    $.ajax({
        url: 'http://widgets/world_news_uk/prod/server/index.php',
        dataType: 'json',
        success: function(resp) {
            console.log('World News en data - ', resp);

            var i = 0;

            for (var item in resp) {
                var $block = $("<div/>", {
                    "class": "content__block js-block"
                })

                var $title,
                    $description;

                if (resp[item].hasDescr) {
                    $title = $("<div/>", {
                        "class": "content__block__title js-title",
                        text: resp[item].title
                    }).attr('data-type', 'small');

                    $description = $("<div/>", {
                        "class": "content__block__description",
                        text: resp[item].description
                    })

                    $title.appendTo($block);
                    $description.appendTo($block);
                    $block.appendTo($content);
                } else {
                    $title = $("<div/>", {
                        "class": "content__block__title js-title",
                        text: resp[item].title
                    }).css({
                        'position': 'absolute',
                        'visibility': 'hidden',
                        'left': '1440px'
                    })
                    .appendTo($block)
                    .attr('data-type', 'big');

                    $block.addClass('big').appendTo($content);
                }

                if (i === 0) {
                    //$block.addClass('active');
                }

                i++;

                if (i === resp.length) {
                    $content.trigger('create');
                }
            }
        }
    })

    function runingString() {
        var $title = $('.js-block').eq(index).find('.js-title'),
            width = parseInt($title.css('width')),
            length = $title.html().length;
        console.log(animationSpeed * length);

        $('.js-block').eq(index).find('.js-title').animate({
            left: -width + 'px'
        }, animationSpeed * length,'linear', function() {
            index++;
            switchBlock();
            $content.trigger('start');
        })
    }

    function switchBlock() {
        $('.js-block').hide().removeClass('active');
        $('.js-block').eq(index).addClass('active').show();
    }

    $content.on('create', function() {
        setTimeout(function() {
            $('.js-title').each(function(index, el) {
                var width = $(el).width();
                $(this).css({
                    'width': width,
                    'visibility': 'visible'
                })
            })

            $content.trigger('start');
        }, 50)
    })

    $content.on('start', function() {
        var type = $('.js-block').eq(index).find($('.js-title')).data('type');
        console.log(type);
        if (type == 'big') {
            runingString();

        } else if (type == 'small') {
            setTimeout(function() {
                index++;
                switchBlock();
                $content.trigger('start');
            }, 2000)
        }
    })
})</script>
</body>
</html>