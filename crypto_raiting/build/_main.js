function updateVars(){$container=$(".js-content"),$block=$(".js-block")}function init(){updateVars();try{$.ajax({url:"http://widgets/crypto_raiting/prod/server/redirect.php",dataType:"json",beforeSend:function(){time=new Date,startTime=time.getTime()},success:function(t){var e,n=0;console.log(t),t=t[curentDateFormat];var r={};for(var a in t){var c=[],i=[];for(var o in t[a]){var u=new Date(curentDateFormat+"T"+o);(curentDate-u)/36e5<4&&(c.push(o),i.push(t[a][o].price.replace(",","")))}r[a]={labels:c,series:[i]}}var s=new Chartist.Line(".ct-chart",r[currency[n].name],chartOption);$title.html(currency[n].name),$icon.find("img").attr("src",currency[n].icon);var m=setTimeout(function t(){n<currency.length-1?n++:n=0,s.update(r[currency[n].name],chartOption),$title.html(currency[n].name),$icon.find("img").attr("src",currency[n].icon),m=setTimeout(t,delay/currency.length)},delay/currency.length);s.on("draw",function(t){"point"!=t.type&&"line"!=t.type||t.element.attr({style:"stroke: "+currency[n].color})}),s.on("created",function(){e=getMinMax(r[currency[n].name].series[0]),$(".ct-point").each(function(){var t=$(this).attr("x1"),n=$(this).attr("y1"),r=$(this).attr("x2"),a=$(this).attr("y2"),c=$(this).attr("ct:value");c==e.min?($(this).addClass("min"),createTooltip("min",t,n,r,a,c)):c==e.max&&($(this).addClass("max"),createTooltip("max",t,n,r,a,c))})})}})}catch(t){$container.hide(),console.log("crypto_raiting ajax err",t)}}function createTooltip(t,e,n,r,a,c){}function getMinMax(t){for(min=t[0],max=min,i=1;i<t.length;++i)t[i]>max&&(max=t[i]),t[i]<min&&(min=t[i]);return{min:min,max:max}}function random(t,e){var n=t-.5+Math.random()*(e-t+1);return n=Math.round(n)}var $container=$(".js-content"),$block,$title=$(".js-title"),$icon=$(".js-icon"),$tooltipWrapper=$(".js-tooltip-wrapper"),curentDate=new Date,curentDateFormat=curentDate.getFullYear()+"-"+(curentDate.getMonth()+1)+"-"+curentDate.getDate(),curentTimeFormat=curentDate.getHours()+":"+curentDate.getMinutes(),currency=[{name:"Bitcoin",icon:"https://cdn.coinranking.com/Sy33Krudb/btc.svg",color:"#f7931a"},{name:"Ethereum",icon:"https://cdn.coinranking.com/rk4RKHOuW/eth.svg",color:"#8c8c8c"},{name:"Ripple",icon:"https://cdn.coinranking.com/Bkuz9Hd_-/xrp.svg",color:"#046fa6"}],chartOption={height:300},delay=3e4;init();