$(document).ready(function(){function e(e,o){return Math.floor(Math.random()*(o-e+1))+e}function o(o){var a,s="",n="";o.img?(s="bg",n=o.img,a='<div class="content__block js-block '+s+'" style="background-image: url('+n+')"><div class="content__block__title">'+o.fact+'</div><div class="fake"></div></div>'):(s=t[e(0,t.length-1)],a='<div class="content__block js-block '+s+'"><div class="content__block__title">'+o.fact+'</div><div class="fake"></div></div>'),$(".js-content").append(a)}function a(e,o){for(var a,t=o-e+1,s=[],n=[];t--;)s.push(t+e);for(;s.length;)a=Math.round(Math.random()*(s.length-1)),n.push(s[a]),s.splice(a,1);return n}var t=["star","black","red"],s=["left","right","top","bottom"];try{var n,l;$.ajax({url:"https://js.dooh.xyz/chinese_facts/server/index.php",beforeSend:function(){n=new Date,l=n.getTime()},success:function(t){n=new Date,console.log((n.getTime()-l)/1e3);try{console.log("chinese_facts data - ",JSON.parse(t)),t=JSON.parse(t),o(t[1]);for(var r in t)1!=r&&o(t[r]);for(var c=$(".js-block"),d=a(0,c.length-1),i=0;c.length>i;i++)c.eq(d[i]).addClass(s[e(0,s.length-1)]);c.eq(0).addClass("show");var h=1;setInterval(function(){h<c.length?(c.eq(h).addClass("show"),h++):(h=0,c.removeClass("show"),c.eq(h).addClass("show"))},8e3)}catch(e){console.log(e),console.log("ошибка внутри ajax"),$(".preloader").addClass("error")}},complete:function(){},error:function(e,o,a){console.log(e,o,a),$(".preloader").addClass("error")}})}catch(e){console.log(e),console.log("ошибка ajax"),$(".preloader").addClass("error")}});